<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.1//EN"
        "http://struts.apache.org/dtds/struts-2.1.dtd">
<struts>

	<package name="business" extends="businessInterceptor" namespace="/business">
	    <!-- <action name="businessmanager" class="com.yq.admin.business.action.BusinessManagerAction">
		    <result name="success">
		       manager.jsp
		    </result>
		</action>
		<action name="getResource" class="com.yq.admin.business.action.BusinessManagerAction" method="getResource">
		     <result name="success">
		       left2.jsp
		    </result>
		</action>
		  -->
		<action name="readme" class="com.yq.admin.business.action.ReadMeAction">
		    <result name="success">
		      ybdetails.jsp
		    </result>
		</action>
		<action name="yibidetail" class="com.yq.admin.business.action.ReadMeAction" method="outExcel">
		</action>
		
		<action name="logout001" class="com.yq.admin.business.action.LogoutAction">
		    <result name="success" type="redirect">
		        /businessindex
		    </result>
		</action>
	</package>

	<!-- 一个包可以就是一个模块 -->
	<package name="businessLogin" extends="noLoginInterceptor" namespace="/">
		<!-- 一个包下可以放这个模块下的所有action -->
		<action name="businessindex" class="com.yq.admin.business.action.BusinessLoginAction">
			<result name="success" >/business/login.jsp</result>
			<result name="redirect" type="redirect">/business/readme</result>
		</action>
	</package>
	

    <package name="businessInterceptor" extends="someInterceptor">

		<interceptors>
			<!-- 认证拦截器-->
			<interceptor name="businessInterceptor"
				class="com.yq.admin.business.interceptor.BusinessInterceptor" />
			<interceptor-stack name="businessStack">
				<interceptor-ref name="businessInterceptor" />
				<interceptor-ref name="someStack" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="businessStack" />

		<global-results>
			<!-- 当没有登录的时候就会跳到首页要求其进行登录 -->
			<result name="nologin" type="redirect">
				/businessindex
			</result>
			<result name="noPermission" type="redirect">
				/manage/noPermission.jsp
			</result>
		</global-results>
	</package>
	<package name="noLoginInterceptor" extends="someInterceptor">

		<interceptors>
			<!-- 认证拦截器-->
			<interceptor name="noLoginInterceptor"
				class="com.yq.common.interceptor.NoLoginInterceptor" />
			<interceptor-stack name="noLoginStack">
				<interceptor-ref name="noLoginInterceptor" />
				<interceptor-ref name="someStack" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="noLoginStack" />
	</package>
	
	<package name="someInterceptor" extends="myInterceptor">
		<interceptors>
		    <!-- 并发访问限制 -->
		    <interceptor name="webLocalSessiontUserVisitSpeedInterceptor"
				class="com.yq.common.interceptor.WebLocalSessiontUserVisitSpeedInterceptor" />
			<!-- sql注入烂机器-->
			<interceptor name="illegalCharacterInterceptor"
				class="com.sr178.module.web.interceptor.IllegalCharacterInterceptor" />
			<interceptor-stack name="someStack">
			    <interceptor-ref name="webLocalSessiontUserVisitSpeedInterceptor" />
				<interceptor-ref name="illegalCharacterInterceptor" />
				<interceptor-ref name="myStack" />
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="someStack" />
	</package>
</struts>
